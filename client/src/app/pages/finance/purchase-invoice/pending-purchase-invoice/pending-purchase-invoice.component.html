<div class="card">
    
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Pending Purchase Invoice</h5>
        
                        <p-table [value]="pendingPurchaseInvoiceList"
                                [paginator]="true"
                                [rows]="5"
                                [showCurrentPageReport]="true"
                                [tableStyle]="{ 'min-width': '50rem' }"
                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                [rowsPerPageOptions]="[5, 25, 50]"
                                styleClass="p-datatable-sm"
                                dataKey="itemId">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th></th>
                                    <th>Purchase Request Number</th>
                                    <th>Supplier</th>
                                    <th>Is Purchase Requested</th>
                                    <th>Vocher Number</th>
                                    <th>Date</th>
                                    <th>Is Approved</th>
                                    <th>Approver Employee</th>
                                    <th>Remark</th>
                        
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-purchase let-expanded="expanded">
                                <tr>
                                    <td>
                                        <button type="button" pButton pRipple [pRowToggler]="purchase"
                                            class="p-button-text p-button-rounded p-button-plain"
                                            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                                    </td>
                                    <td style="min-width: 12rem;">{{purchase.purchaseRequestNo}}</td>
                                    <td style="min-width: 10rem;">{{purchase.supplier}}</td>
                                    <td style="min-width: 10rem;">{{purchase.isPurchaseRequested}}</td>
                                    <td style="min-width: 10rem;">{{purchase.vocherNo}}</td>
                                    <td style="min-width: 10rem;">{{purchase.date}}</td>
                                    <td style="min-width: 10rem;">{{purchase.isApproved}}</td>
                                    <td style="min-width: 10rem;">{{purchase.remark}}</td>
                                                                       
                                    
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="rowexpansion" let-purchase>
                                <tr>
                                    <td colspan="10">
                                        <div class="p-3">
                                            <div class="col-lg-12 text-end ">
                                                <button type="button" class="btn btn-outline-success" (click)="approvePurchaseInvoice(purchase.id ,purchase.purchaseRequestNo, purchase.supplier,purchase.vocherNo,purchase.date)"><i class="bi bi-check me-1"></i>
                                                    Approve Purchase Invoice</button>
                                            </div>
                                            
                                            <p-table [value]="purchase.paymentDetailLists" dataKey="id" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>Item Number</th>
                                                        <th>Item Name</th>
                                                        <th>Quantity</th>
                                                        <th>Price</th>
                                                        <th>Total Price</th>
                                                                       
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-item>
                                                    <tr>
                                                        <td>{{item.itemNo}}</td>
                                                        <td>{{item.itemName}}</td>
                                                        <td>{{item.quantity}}</td>
                                                        <td>{{item.unitPrice}}</td>
                                                        <td>{{item.totalPrice}}</td>
                                                        
                                                        
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="emptymessage">
                                                    <tr>
                                                        <td colspan="4">There are no Item Details for this Purchase Invoice yet.</td>
                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                
                </div>
            </div>
        </div>
    </div>
</div>